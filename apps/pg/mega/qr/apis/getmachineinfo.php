<?php namespace FGTA4\apis;

if (!defined('FGTA4')) {
	die('Forbiden');
}


require_once __ROOT_DIR.'/core/sqlutil.php';


use \FGTA4\exceptions\WebException;


$API = new class extends WebAPI {


	function __construct() {

	}
	
	public function execute($region_id, $branch_id, $machine_id) {
		try {
		
			$mid = "";
			$tid = "";
			
			
			$minfo = $this->getMerchantInfo($region_id, $branch_id, $machine_id);
			$mid = $minfo->mid;
			$tid = $minfo->tid;

			return (object)[
				'success' => true,
				'mid' => $mid,
				'tid' => $tid 
			];

		} catch (\Exception $ex) {
			throw $ex;
		}
	}

	public function getMerchantInfo($region_id, $branch_id, $machine_id) {
		$DATA = $this->getData();
		$id = "$region_id:$branch_id";
		if (!array_key_exists($id, $DATA)) {
			return (object)[
				'mid'=>'00000122264', 'tid'=>'30016493'
			];
		} else {
			return $DATA[$id];
		}
	}


	public function getData() {
		return [
			'01400:0000600' => (object)['mid'=>'00000428094', 'tid'=>'70006124'],
			'01400:0000800' => (object)['mid'=>'00000428110', 'tid'=>'70006126'],
			'00900:0000300' => (object)['mid'=>'00000428136', 'tid'=>'70006128'],
			'00900:0001800' => (object)['mid'=>'00000428169', 'tid'=>'70006130'],
			'00900:0002300' => (object)['mid'=>'00000428185', 'tid'=>'70006132'],
			'00900:0000600' => (object)['mid'=>'00000428201', 'tid'=>'70006134'],
			'00900:0000700' => (object)['mid'=>'00000428227', 'tid'=>'70006136'],
			'00900:0001300' => (object)['mid'=>'00000428243', 'tid'=>'70006138'],
			'00900:0001900' => (object)['mid'=>'00000428268', 'tid'=>'70006140'],
			'00900:0001902' => (object)['mid'=>'00000429084', 'tid'=>'70006202'],
			'00900:0001400' => (object)['mid'=>'00000429100', 'tid'=>'70006204'],
			'00900:0001904' => (object)['mid'=>'00000429209', 'tid'=>'70006214'],
			'02600:0000300' => (object)['mid'=>'00000428284', 'tid'=>'70006142'],
			'02600:0001800' => (object)['mid'=>'00000428300', 'tid'=>'70006144'],
			'02600:0002300' => (object)['mid'=>'00000428326', 'tid'=>'70006146'],
			'02600:0001700' => (object)['mid'=>'00000428342', 'tid'=>'70006148'],
			'02600:0000600' => (object)['mid'=>'00000428367', 'tid'=>'70006150'],
			'02600:0001400' => (object)['mid'=>'00000428391', 'tid'=>'70006152'],
			'02600:0005000' => (object)['mid'=>'00000428417', 'tid'=>'70006154'],
			'02600:0001900' => (object)['mid'=>'00000428433', 'tid'=>'70006156'],
			'02600:0000700' => (object)['mid'=>'00000428904', 'tid'=>'70006196'],
			'02600:0001902' => (object)['mid'=>'00000428946', 'tid'=>'70006198'],
			'02600:0001904' => (object)['mid'=>'00000429225', 'tid'=>'70006216'],
			'01800:0000300' => (object)['mid'=>'00000428458', 'tid'=>'70006158'],
			'01800:0002300' => (object)['mid'=>'00000428474', 'tid'=>'70006160'],
			'01800:0000600' => (object)['mid'=>'00000428490', 'tid'=>'70006162'],
			'01800:0001400' => (object)['mid'=>'00000428516', 'tid'=>'70006164'],
			'03400:0000300' => (object)['mid'=>'00000428532', 'tid'=>'70006166'],
			'03400:0001700' => (object)['mid'=>'00000428557', 'tid'=>'70006168'],
			'03400:0003400' => (object)['mid'=>'00000428573', 'tid'=>'70006170'],
			'03400:0000700' => (object)['mid'=>'00000428599', 'tid'=>'70006172'],
			'03400:0004800' => (object)['mid'=>'00000428615', 'tid'=>'70006174'],
			'03400:0001900' => (object)['mid'=>'00000428631', 'tid'=>'70006176'],
			'03400:0001902' => (object)['mid'=>'00000429019', 'tid'=>'70006200'],
			'03400:0006400' => (object)['mid'=>'00000429126', 'tid'=>'70006206'],
			'03400:0000400' => (object)['mid'=>'00000429142', 'tid'=>'70006208'],
			'03400:0001904' => (object)['mid'=>'00000429241', 'tid'=>'70006218'],
			'01100:0000300' => (object)['mid'=>'00000428656', 'tid'=>'70006178'],
			'01100:0001800' => (object)['mid'=>'00000428672', 'tid'=>'70006180'],
			'01100:0002300' => (object)['mid'=>'00000428698', 'tid'=>'70006182'],
			'01100:0000600' => (object)['mid'=>'00000428714', 'tid'=>'70006184'],
			'01100:0000700' => (object)['mid'=>'00000428730', 'tid'=>'70006186'],
			'01100:0000800' => (object)['mid'=>'00000428755', 'tid'=>'70006188'],
			'01100:0001300' => (object)['mid'=>'00000428771', 'tid'=>'70006190'],
			'01100:0001900' => (object)['mid'=>'00000428797', 'tid'=>'70006192'],
			'01100:0001400' => (object)['mid'=>'00000429167', 'tid'=>'70006210'],
			'03700:0001904' => (object)['mid'=>'00000429266', 'tid'=>'70006220'],
			'03700:0000760' => (object)['mid'=>'00000445155', 'tid'=>'70007476'],
		];
	}

};

